{"version":3,"file":"index-BcZn2E3B.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function searchingRequest(params) {\n  try {\n    const response = await axios.get('', { params });\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    iziToast.error({\n      title: 'Error',\n      message: `Failed to fetch data: ${error.message}`,\n    });\n    throw error;\n  }\n}\n","const imagesList = document.querySelector('.images-list');\n\nexport function renderImages(imagesData) {\n  const markUp = imagesData.hits\n    .map(image => {\n      return `\n        <li class=\"images-item\">\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=\"360\" height=\"202\">\n            </a>\n\n            <div class=\"images-titles\">\n                <p><b>Likes</b> ${image.likes}</p>\n                <p><b>Views</b> ${image.views}</p>\n                <p><b>Comments</b> ${image.comments}</p>\n                <p><b>Downloads</b> ${image.downloads}</p>\n            </div>\n        </li>\n        `;\n    })\n    .join('');\n  imagesList.insertAdjacentHTML('beforeend', markUp);\n}","import { searchingRequest } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.search-form');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loaderContainer = document.querySelector('.loader-container');\nconst imagesList = document.querySelector('.images-list');\nconst lightbox = new SimpleLightbox('.images-list a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet searchParam = {\n  key: '45237174-16156409efac0dde2d7dc0545', \n  q: null,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  page: 1,\n  per_page: 15,\n};\n\nlet totalHits = 0;\n\nconst iziToastError = {\n  message: 'Sorry, there are no images matching your search query. Please try again!',\n  color: 'red',\n  position: 'center',\n  progressBar: false,\n};\n\nconst iziToastWarning = {\n  message: 'Please fill the search field',\n  color: 'yellow',\n  position: 'center',\n  progressBar: false,\n};\n\nfunction showLoader() {\n  loaderContainer.style.display = 'flex';\n}\n\nfunction hideLoader() {\n  loaderContainer.style.display = 'none';\n}\n\nfunction resetSearch() {\n  searchParam.page = 1;\n  imagesList.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n}\n\nfunction handleScroll() {\n  const { height: cardHeight } = imagesList.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  searchParam.q = event.target.elements.search_key.value.trim();\n  event.target.elements.search_key.value = '';\n\n  if (!searchParam.q) {\n    iziToast.warning(iziToastWarning);\n    return;\n  }\n\n  resetSearch();\n  showLoader();\n\n  try {\n    const imagesData = await searchingRequest(searchParam);\n    if (imagesData.totalHits === 0) {\n      iziToast.error(iziToastError);\n      hideLoader();\n      return;\n    }\n\n    totalHits = imagesData.totalHits;\n    renderImages(imagesData);\n    hideLoader();\n    lightbox.refresh();\n\n    if (searchParam.page * searchParam.per_page < totalHits) {\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    console.error(error);\n    hideLoader();\n    iziToast.error({\n      message: 'An error occurred. Please try again later.',\n      color: 'red',\n      position: 'center',\n      progressBar: false,\n    });\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  searchParam.page += 1;\n  showLoader();\n\n  try {\n    const imagesData = await searchingRequest(searchParam);\n    renderImages(imagesData);\n    hideLoader();\n    lightbox.refresh();\n    handleScroll();\n\n    if (searchParam.page * searchParam.per_page >= totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        color: 'blue',\n        position: 'center',\n        progressBar: false,\n      });\n    }\n  } catch (error) {\n    console.error(error);\n    hideLoader();\n    iziToast.error({\n      message: 'An error occurred. Please try again later.',\n      color: 'red',\n      position: 'center',\n      progressBar: false,\n    });\n  }\n});\n"],"names":["axios","searchingRequest","params","error","iziToast","imagesList","renderImages","imagesData","markUp","image","form","loadMoreBtn","loaderContainer","lightbox","SimpleLightbox","searchParam","totalHits","iziToastError","iziToastWarning","showLoader","hideLoader","resetSearch","handleScroll","cardHeight","event"],"mappings":"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"}